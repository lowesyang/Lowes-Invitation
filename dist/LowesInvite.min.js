function LowesInvite(){var t=arguments[0]||{};this.root=document.querySelector(".lowesInvite"),this.createDom(this.root.getAttribute("data-img"),this.root),this.canvas=document.querySelector(".lowesInvite>canvas"),this.context=this.canvas.getContext("2d"),this.image=document.querySelector(".lowesInvite>img"),this.image.onload=function(){this.canvas.setAttribute("width",""+this.image.offsetWidth),this.canvas.setAttribute("height",""+this.image.offsetHeight),this.originalData=this.image.src,this.width=this.image.offsetWidth,this.height=this.image.offsetHeight,this.context.font=t.fontSize+"px "+t.fontFamily,t.bold&&(this.context.font="bold "+this.context.font),this.context.textAlign="left",this.context.baseline="middle",this.setNamePos(t.x,t.y),this.setNameColor(t.color),this.init(),this.image.onload=null}.bind(this)}LowesInvite.prototype.createDom=function(t,e){var i=document.createElement("img"),s=document.createElement("canvas");i.src=t,s.style.opacity=0,s.style.position="absolute",s.style.zIndex=-999,s.style.left=0,s.style.top=0,e.appendChild(i),e.appendChild(s)},LowesInvite.prototype.init=function(){this.clear(),this.name=null,this.context.fillText("您的名字",this.signX,this.signY),this.image.src=this.canvas.toDataURL("image/png")},LowesInvite.prototype.clear=function(){this.image.src=this.originalData,this.context.drawImage(this.image,0,0,this.width,this.height)},LowesInvite.prototype.setNamePos=function(t,e){this.signX=t||0,this.signY=e||0},LowesInvite.prototype.setNameColor=function(t){this.context.fillStyle=t||"#333333"},LowesInvite.prototype.drawName=function(t){this.clear(),this.name=t,this.context.fillText(t,this.signX,this.signY),this.image.src=this.canvas.toDataURL("image/png")},LowesInvite.prototype.exportImg=function(){if(!this.name)return alert("请输入您的姓名后再下载!");var t=document.createElement("a");t.download="invitation",t.href=this.image.src;var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.dispatchEvent(e)};